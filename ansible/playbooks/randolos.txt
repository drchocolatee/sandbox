---
- name: Remove specified .jar files from /var/lib/tomcat/shared_loader/
  hosts: all
  become: yes

  vars:
    jar_files:
      - lz4-digest.jar
      - rank-snakeyaml.jar
      - parent-join-client.jar
      - parent-join.jar
      - maven-apt-serializer.jar
      - lz4-java.jar
      - lang-mustache-client.jar
      - lang-mustache.jar
      - simple-client.jar
      - httpcore.jar
      - jna-5.8.0.jar
      - aggs-matrix-stats-client.jar
      - aggs-matrix-stats.jar
      - elasticsearch-x-content.jar
      - elasticsearch-secure-sm.jar
      - elasticsearch-plugin-classloader.jar
      - lz4-java.jar
      - elasticsearch-geo.jar
      - elasticsearch-cli.jar
      - elasticsearch.jar
      - commons-logging-1.1.3.jar
      - elasticsearch-rest-client.jar
      - elasticsearch-high-level-client.jar
      - elasticsearch-rest-high-level-client.jar
      - elasticsearch-ssl-config-8.7.1.jar
      - hppc.jar
      - netty4-client.jar
      - netty4-client-ssl.jar
      - percolator-client.jar
      - log4j-api.jar
      - httpasyncclient.jar
      - httpclient.jar
      - jackson-annotations.jar
      - jackson-core.jar
      - jackson-databind.jar
      - jackson-dataformat-cbor.jar
      - jackson-dataformat-smile.jar
      - jackson-dataformat-yaml.jar
      - jna-5.8.0.jar
      - elasticsearch-tookit-time.jar

  tasks:
    - name: Remove specified .jar files from the target directory
      shell: "rm -f /var/lib/tomcat/shared_loader/{{ item }}"
      loop: "{{ jar_files }}"
      args:
        removes: "/var/lib/tomcat/shared_loader/{{ item }}"
      ignore_errors: yes